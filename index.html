<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Dear Project</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background: #f7f7f7;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    h2 {
      margin-top: 40px;
      text-align: center;
      color: #333;
    }
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 5px;
      max-width: 500px;
      margin: 10px auto 40px;
      background: white;
      padding: 10px;
      border-radius: 12px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .day {
      text-align: center;
      padding: 8px;
      border-radius: 6px;
    }
    .header {
      font-weight: bold;
      background: #ddd;
    }
    .sunday { color: red; }
    .saturday { color: blue; }
    .holiday { color: red; }
    .posted { background-color: #d4edda; } /* 投稿済み日付 */
    .today { background-color: #fff3cd; }  /* 今日 */
    a { text-decoration: none; color: inherit; }
  </style>

  <style>
    .nav-links {
      display: flex;
      justify-content: space-between;
      margin-top: 40px;
      font-size: 18px;
    }

    .nav-links a {
      text-decoration: none;
      padding: 8px 14px;
      border: 1px solid #ccc;
      border-radius: 6px;
      background-color: #f8f8f8;
    }

    .nav-links a:hover {
      background-color: #e0e0e0;
    }
  </style>

</head>
<body>
  <h1>日記一覧 カレンダー</h1>
  <div id="calendars"></div>

  <script>
    // ==== 設定 ====
    const start = new Date(2025, 9);  // 2025年10月
    const end = new Date(2026, 11);   // 2026年12月
    const diaryStart = new Date(2025, 9, 23); // 日記開始日 2025年10月24日

    // 日本の祝日（主要なもののみ）
    const holidays = [
      "2025-01-01","2025-01-13","2025-02-11","2025-02-23","2025-03-20",
      "2025-04-29","2025-05-03","2025-05-04","2025-05-05","2025-07-21",
      "2025-08-11","2025-09-15","2025-09-23","2025-10-13","2025-11-03","2025-11-23","2025-12-23",
      "2026-01-01","2026-01-12","2026-02-11","2026-02-23","2026-03-20",
      "2026-04-29","2026-05-03","2026-05-04","2026-05-05","2026-07-20",
      "2026-08-11","2026-09-21","2026-09-22","2026-10-12","2026-11-03","2026-11-23","2026-12-23"
    ];

    const container = document.getElementById("calendars");
    const today = new Date();
    const todayStr = `${today.getFullYear()}-${String(today.getMonth()+1).padStart(2,'0')}-${String(today.getDate()).padStart(2,'0')}`;

    // ==== カレンダー生成関数 ====
    function generateCalendar(year, month) {
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);

      // 見出し
      const h2 = document.createElement("h2");
      h2.textContent = `${year}年${month+1}月`;
      container.appendChild(h2);

      const cal = document.createElement("div");
      cal.className = "calendar";

      const weekDays = ["日","月","火","水","木","金","土"];
      weekDays.forEach(day => {
        const cell = document.createElement("div");
        cell.className = "day header";
        cell.textContent = day;
        cal.appendChild(cell);
      });

      // 空白セル
      for (let i=0; i<firstDay.getDay(); i++){
        const empty = document.createElement("div");
        cal.appendChild(empty);
      }

      // 日付セル
      for (let day=1; day<=lastDay.getDate(); day++){
        const date = new Date(year, month, day);
        const dateStr = `${year}-${String(month+1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;

        const cell = document.createElement("div");
        cell.className = "day";

        // 曜日クラス
        if(date.getDay()===0) cell.classList.add("sunday");
        if(date.getDay()===6) cell.classList.add("saturday");

        // 祝日
        if(holidays.includes(dateStr)) cell.classList.add("holiday");

        // 日記開始日以降〜昨日までを緑背景
        if(date >= diaryStart && date < today) cell.classList.add("posted");

        // 今日
        if(dateStr === todayStr) cell.classList.add("today");

        // リンク
        const link = document.createElement("a");
        link.href = `dailies/${dateStr}.html`;
        link.textContent = day;
        cell.appendChild(link);

        cal.appendChild(cell);
      }

      container.appendChild(cal);
    }

    // ==== 範囲内カレンダー生成 ====
    for(let d = new Date(start); d <= end; d.setMonth(d.getMonth()+1)){
      generateCalendar(d.getFullYear(), d.getMonth());
    }

  </script>

</body>
</html>
